const articles = [
  {
    id: 1,
    title: "Dormir bien: el secreto de un organismo saludable y equilibrado ",
    category: "Descanso",
    date: "20 de diciembre, 2023",
    excerpt: "Dormir no es un lujo, es una necesidad biológica tan importante como alimentarse o mantenerse activo...",
    author: "Carlos Rodríguez",
    readTime: "7 min",
    // comments: 18,
    image: "./images/dormir.jpg",
    content: `
    </br><p>Dormir no es un lujo, es una necesidad biológica tan importante como alimentarse o mantenerse
    activo. Durante el sueño, el cerebro y el cuerpo no se “apagan”, sino que cumplen funciones vitales
    que garantizan energía, claridad mental y buena salud al día siguiente. Cada etapa del sueño
    contribuye a la memoria, la creatividad, el aprendizaje y la reparación celular.
    </p></br>
    <p><strong>Beneficios de dormir bien:</strong></p>
    <p>Un descanso suficiente — en promedio de 7 a 8 horas para los adultos — se traduce en múltiples
beneficios:</p>
    <ul>
      <li>
      <strong>Mejora cognitiva y rendimiento:</strong>
      el sueño favorece la concentración, la rapidez de reacción y la toma de decisiones acertadas.</li>
      <li>
      <strong>Estabilidad emocional:</strong>
       dormir lo necesario reduce la irritabilidad, mejora las relaciones sociales y disminuye el riesgo de depresión.
      </li>
      <li>
      <strong>Salud física:</strong>
      un buen descanso regula la presión arterial, fortalece el sistema inmunológico y ayuda a prevenir enfermedades cardíacas, obesidad y diabetes.
      </li>
      <li>
      <strong>Regeneración del cuerpo:</strong>
      durante el sueño profundo se liberan hormonas que favorecen el crecimiento, la reparación de tejidos y el fortalecimiento muscular.
      </li>
    </ul>

    <p><strong>Rutinas diarias para un mejor descanso</strong></p>
    <p>Para alcanzar un sueño reparador, la clave está en mantener hábitos que respeten el ciclo natural del cuerpo:</p>
    <ol>
    <li><strong>Mantener un horario fijo:</strong> acostarse y levantarse a la misma hora todos los días, incluso en fines de semana.</li>
    <li><strong>Cuidar la actividad física:</strong> realizar al menos 30 minutos de ejercicio diario, pero no justo antes de dormir.</li>
    <li><strong>Evitar estimulantes:</strong> reducir el consumo de cafeína, nicotina y alcohol en la tarde y la noche.</li>
    <li><strong>Cenas ligeras y moderadas:</strong> evitar comidas pesadas o demasiado líquidas cerca de la hora de dormir.</li>
    <li><strong>Crear un ritual relajante:</strong> leer, escuchar música tranquila o tomar un baño caliente antes de acostarse.</li>
    <li><strong>Optimizar el ambiente:</strong> mantener el dormitorio fresco, oscuro y libre de pantallas o ruidos que interfieran.</li>
    <li><strong>Aprovechar la luz solar:</strong> exponerse a la luz natural ayuda a regular el reloj biológico.</li>
    <li><strong>Limitar las siestas:</strong> dormir menos de una hora y nunca después de las 3:00 p.m.</li>
    <li><strong>Escuchar al cuerpo:</strong> si después de 20 minutos no se logra conciliar el sueño, es mejor levantarse y realizar una actividad relajante.</li>
</ol>

    <p>Dormir bien no solo garantiza energía para enfrentar el día, sino que protege la salud a largo plazo. Convertir el descanso en una prioridad y adoptar rutinas saludables es la mejor inversión para el cuerpo y la mente.
    </p>

    <h3>Referencias</h3>
    <p>U.S. Departament of hearth and human servise. (Julio de 2013). <em>Su guia para un sueño saludable.</em></p>
    <p>Obtenido de: <a style="color: blue" href="chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://www.nhlbi.nih.gov/files/doc
s/public/sleep/In_Brief_YG_to_Sleep_Spanish_Final.pdf">docs</a></p>
  `
  },
  { id: 2,
    title: "El valor del ocio y la recreación para la salud integral",
    category: "Ocio",
    date: "8 de marzo, 2024",
    excerpt: "En la vida moderna, marcada por la rapidez de las obligaciones laborales, académicas y sociales, el tiempo libre se ha convertido ..",
    author: "Carlos Rodríguez",
    readTime: "6 min",
    // comments: 18, 
    content: `
    <p>
  En la vida moderna, marcada por la rapidez de las obligaciones laborales,
  académicas y sociales, el tiempo libre se ha convertido en un recurso cada vez
  más escaso y, paradójicamente, mal comprendido. Muchas personas perciben el
  ocio como un lujo innecesario o, en el mejor de los casos, como un simple
  descanso entre jornadas de trabajo. Sin embargo, investigaciones en salud
  mental señalan que dedicar tiempo a actividades recreativas y relajantes es
  fundamental para el equilibrio físico, emocional y social del ser humano.
</p><br>
<p>
  El ocio, lejos de ser sinónimo de inactividad o pereza, implica un espacio
  elegido voluntariamente para descansar, crear, aprender o convivir.
  Actividades como la lectura, el arte, el deporte, la música o el contacto con
  la naturaleza no solo generan placer, sino que favorecen la creatividad,
  fortalecen las relaciones sociales y actúan como mecanismos de prevención
  frente al estrés y el desgaste psicológico.
</p><br>
<p>
  El documento destaca que la recreación cumple un papel esencial al ofrecer
  experiencias que enriquecen la vida y contribuyen al desarrollo físico, mental
  y moral. En este sentido, es necesario
</p><br>
<p>
  diferenciar la recreación de la mera diversión: mientras la primera promueve
  bienestar y crecimiento, la segunda puede convertirse en evasión pasajera, sin
  aportar beneficios duraderos. No obstante, persisten patrones culturales que
  obstaculizan el disfrute del ocio, como la visión compulsiva del trabajo, la
  idea de que el descanso solo se justifica como recompensa o la tendencia a
  asociar la recreación con culpabilidad por “no producir”. Superar estas
  barreras requiere una transformación educativa y social que enseñe a valorar
  el tiempo libre como un derecho y una necesidad vital
</p><br>
<p>
  En conclusión, dedicar tiempo a actividades relajantes y recreativas no es un
  lujo, sino un componente esencial de la salud integral. El ocio bien orientado
  no solo mejora el bienestar personal, sino que fortalece la vida comunitaria
  al fomentar la comunicación, reducir tensiones y promover una sociedad más
  equilibrada.
</p>

    `
  },
  { 
    id: 3,
    title: "La importancia de las vacaciones para la salud",
    category: "Organización",
    date: "1 de marzo, 2024",
    excerpt: "Tomarse unas vacaciones no es un lujo, sino una necesidad vital para mantener la salud física, mental y emocional.",
    author: "Laura Gómez",
    readTime: "7 min",
    comments: 32,
    content: `
    <p>Tomarse unas vacaciones no es un lujo, sino una necesidad vital para mantener la salud
física, mental y emocional. En una sociedad donde el ritmo laboral suele ser intenso y las
exigencias constantes, el descanso se convierte en una herramienta esencial para prevenir
el estrés, mejorar el bienestar general y potenciar la productividad.</p><br>
<p>Diversos estudios han demostrado que los empleados que disfrutan de sus días de
descanso regresan al trabajo con mayor energía, motivación y creatividad. De acuerdo con
investigaciones de la University of the Rockies, los beneficios alcanzan su punto máximo
cuando las vacaciones duran alrededor de diez días consecutivos. Este período permite al
cuerpo y a la mente desconectarse de la rutina, recuperar horas de sueño y liberar tensiones acumuladas, lo que se traduce en un mejor estado de ánimo y mayor satisfacción laboral.</p><br>
<p>El psicólogo Christian Jarett, miembro de la Sociedad Psicológica Británica, señala que las
vacaciones también reducen el riesgo de enfermedades relacionadas con el estrés, como la
hipertensión o la ansiedad. De hecho, países con menores tasas de descanso laboral, como
Japón, presentan mayores índices de dolencias derivadas del exceso de trabajo. Además,
las pausas frecuentes a lo largo del año — aunque sean cortas — favorecen una recuperación constante y sostenible.</p><br>
<p>Desde una perspectiva empresarial, las vacaciones no sólo benefician al trabajador, sino
también a la organización. Un empleado descansado y motivado rinde mejor, se
compromete más con sus tareas y contribuye a un ambiente laboral más positivo. Por ello,
promover el descanso es una estrategia que fortalece tanto la salud del individuo como la
productividad del equipo.</p><br>
<p>En definitiva, las vacaciones son una inversión en bienestar. Tomarse el tiempo para
desconectar, disfrutar y cuidar de uno mismo no solo mejora la calidad de vida, sino que
también potencia el rendimiento y la felicidad en el ámbito laboral.</p><br>
    `,
  },
  { 
    id: 4,
    title: "Los tiempos en los que se recomienda comer",
    category: "Alimentación",
    date: "23 de febrero, 2024",
    excerpt: "En Balancea-TE, creemos que cuidar la alimentación no se trata solo de comer bien, sino de mantener un equilibrio que favorezca la salud, la energía y..",
    author: "Miguel Torres",
    readTime: "5 min",
    comments: 15,
    content: `
      <p>En Balancea-TE, creemos que cuidar la alimentación no se trata solo de comer bien, sino de
mantener un equilibrio que favorezca la salud, la energía y el bienestar en todas las etapas
de la vida.</p><br>
<p><strong>Alimentación saludable: equilibrio para una vida en bienestar</strong></p>
<p>Una buena alimentación ayuda a mantener un cuerpo fuerte, prevenir enfermedades y
mejorar el estado de ánimo. La ciencia ha demostrado que la manera en que comemos
influye directamente en nuestra salud, especialmente en la prevención de enfermedades
crónicas como la diabetes tipo 2, la obesidad, la hipertensión o los problemas cardíacos.</p><br>
<p>La Organización Mundial de la Salud (OMS) señala que cinco de los diez factores de riesgo
más comunes están relacionados con la alimentación y el ejercicio físico: la obesidad, el
sedentarismo, el consumo insuficiente de frutas y verduras, la hipertensión y el colesterol
alto.</p><br>
<p>Por lo que comer de forma balanceada no solo sirve para que tu cuerpo se vea más
atractivo, sino que también previene enfermedades en el futuro y tiene relación con una
vida más larga y saludable. Pero más allá de seguir una dieta específica, lo esencial es
mantener una rutina alimentaria regular, evitando los excesos y disfrutando de cada comida
con conciencia.</p><br>
<p><strong>A continuación, te daremos unos tips de rutinas y dietas saludables</strong></p>
<p>Una alimentación saludable es aquella que es variada: ningún alimento aporta todos los
nutrientes. Lo ideal es incluir entre 20 y 30 tipos de alimentos diferentes por semana,
especialmente frutas, verduras, legumbres y cereales integrales. La palabra equilibrio es
clave, las proporciones deben ajustarse a nuestras necesidades.</p><br>
<p>Por ejemplo: 45-65% de las calorías diarias deben venir de carbohidratos saludables (como
arroz, avena, frutas, verduras). 20-35% de grasas buenas (como aceite de oliva, aguacate,
frutos secos). 10-35% de proteínas (pescado, huevos, pollo, legumbres).</p><br>
<p>Se adapta a cada persona. Es importante reconocer que no todas las porciones de alimento
son iguales para todo mundo, de hecho, varía. Un hombre que hace una labor que implica
esfuerzo físico, obviamente su cuerpo más proteína que, por ejemplo, una mujer que trabaja
sentad, obviamente. Entonces todo varía según: género, edad, actividad física o tipo de
trabajo y necesidades fisiológicas.</p><br>
<div style="display: flex;justify-content: center;">
<img src="./image/salad.jpg" alt="" height="180px">
</div>
<br>
<p><strong>Tu cuerpo quiere hacerlo posible, decídete.</strong></p>
<p>Esto se debe acompañar de otros hábitos saludables, como beber suficiente agua, hacer
ejercicio, dormir bien y evitar el tabaco y el alcohol. Comer bien no es solo una elección
individual, sino una forma de cuidar nuestro cuerpo y nuestra mente.</p>
<p>Como dijo el gastrónomo J. Brillat-Savarin: “El destino de las naciones depende de la
manera en que se alimentan” En Balancea-TE te invitamos a construir ese equilibrio día a
día. Alimenta tu cuerpo, nutre tu mente y vive con armonía.</p>
    `
  },
  {
    id: 5,
    title: "Métodos de meditación y sus beneficios para el bienestar",
    category: "Prevención",
    date: "16 de febrero, 2024",
    excerpt: "Herramientas prácticas para cuidar tu salud mental antes de que surjan crisis.",
    author: "Elena Sánchez",
    readTime: "9 min",
    comments: 41,
    content: `
    <p>La meditación es una práctica milenaria que busca armonizar la mente y el cuerpo a través
de la atención plena y la respiración consciente. Hoy en día, existen diferentes métodos que
se adaptan a las necesidades de cada persona y aportan múltiples beneficios para la salud
física y mental.</p><br>
<ol>
    <li><strong>Meditación mindfulness o de atención plena:</strong> Este método se centra en observar los pensamientos, emociones y sensaciones sin juzgarlos. Practicarla con regularidad ayuda a reducir el estrés, mejorar la concentración y fortalecer la inteligencia emocional.</li>
    <li><strong>Meditación guiada:</strong> Ideal para principiantes, utiliza audios o la voz de un guía que conduce la sesión. Favorece la relajación profunda, mejora el sueño y promueve una sensación de calma interior.</li>
    <li><strong>Meditación trascendental:</strong> Se basa en la repetición silenciosa de un mantra personal. Este tipo de meditación ayuda a disminuir la ansiedad, equilibrar la presión arterial y aumentar la energía mental.</li>
    <li><strong>Meditación con respiración consciente:</strong> Consiste en enfocar toda la atención en la respiración, observando el ritmo y la profundidad de cada inhalación y exhalación. Es eficaz para controlar la ansiedad y promover la claridad mental.</li>
    <li><strong>Meditación en movimiento:</strong> Técnicas como el yoga o el tai chi combinan respiración, concentración y movimiento corporal. Sus beneficios incluyen mayor flexibilidad, equilibrio emocional y conexión con el cuerpo.<br>
    En conclusión, meditar no solo calma la mente, sino que también fortalece el bienestar integral. Adoptar un método de meditación acorde al estilo de vida puede transformar positivamente la salud y la calidad de vida.
    </li>
</ol>
    `
  },
];

// categories
const categories = ["Todos los artículos", "Alimentación", "Descanso", "Ocio", "Prevención", "Organización"];

// state
let activeCategory = "Todos los artículos";
let currentPage = 1;
const perPage = 3;

// DOM nodes
const filtersEl = document.getElementById('categoryFilters');
const mainGrid = document.getElementById('mainGrid');
const pagerEl = document.getElementById('pager');

// create filter buttons
function renderFilters() {
  filtersEl.innerHTML = '';
  categories.forEach(cat => {
    const btn = document.createElement('button');
    btn.className = 'pill' + (cat === activeCategory ? ' active' : '');
    btn.innerText = cat;
    btn.onclick = () => {
      activeCategory = cat;
      currentPage = 1;
      renderFilters();
      renderMain();
    };
    filtersEl.appendChild(btn);
  });
}


function getFiltered() {
  if (activeCategory === "Todos los artículos") return articles;
  return articles.filter(a => a.category === activeCategory);
}
function getPageItems(list) {
  const start = (currentPage - 1) * perPage;
  return list.slice(start, start + perPage);
}

// render main grid: featured + cards
function renderMain() {
  mainGrid.innerHTML = '';
  const filtered = getFiltered();

  // featured: first item that has featured=true and matches filter, otherwise first item
  // let featured = filtered.find(a => a.featured) || filtered[0];
  // ensure featured not duplicated in cards list
  // const rest = filtered.filter(a => a.id !== (featured ? featured.id : null));
  const rest = filtered
  // create featured markup
  // if (featured) {
  //   const f = document.createElement('div');
  //   f.className = 'featured';
  //   f.innerHTML = `
  //         <div class="badge">★ Destacado</div>
  //         <div class="title">${featured.title}</div>
  //         <div class="meta">
  //           <span class="tag";">${featured.category.toUpperCase()}</span>
  //           <div style="flex:1"></div>
  //           <div class="muted-small">${featured.date}</div>
  //           <a class="read-more white" href="#" data-id="${featured.id}">Leer artículo completo →</a>
  //         </div>
  //       `;
  //   mainGrid.appendChild(f);
  // }

  // Pagination for cards: apply pagination to 'rest'
  const paged = getPageItems(rest);

  // Cards container
  const cardsWrap = document.createElement('div');
  cardsWrap.className = 'cards';
  if (paged.length === 0) {
    cardsWrap.innerHTML = '<div style="grid-column:1/-1;padding:24px;color:#666">No hay artículos en esta categoría.</div>';
  } else {
    paged.forEach(a => {
      const c = document.createElement('article');
      c.className = 'card';
      const coverColor = getCoverColor(a.category);
      c.innerHTML = `
            <div class="cover square" style="background:${coverColor.background};color:${coverColor.text};">
             <img
                src="./icons/${coverColor.icon}.svg"
                alt="Logo de Apple"
                width="50"
                height="50"
              />
            </div>
            <div class="category-badge" style="margin-bottom:8px; background-color:${coverColor.badge_color};"> ${a.category.toUpperCase()}</div>
            <h3>${a.title}</h3>
            <!-- <p class="lead">${a.excerpt}</p> -->
            <div class="author">
              <div class="avatar">${initials(a.author)}</div>
              <div style="line-height:1.4">
                <div style="font-weight:700">${a.author}</div>
                <div class="muted-small">${a.date}</div>
              </div>
            </div>
            <div class="meta-row">
              <div class="muted-small">⏱ ${a.readTime}</div>
              <a class="read-more" href="#" data-id="${a.id}">Leer artículo completo →</a>
            </div>
          `;
      cardsWrap.appendChild(c);
    });
  }

  mainGrid.appendChild(cardsWrap);
  renderPager(rest.length);
  // attach read handlers
  document.querySelectorAll('.read-more').forEach(el => {
    el.addEventListener('click', (e) => {
      e.preventDefault();
      const id = e.currentTarget.getAttribute('data-id');
      openArticle(id);
    });
  });
}

function renderPager(totalItems) {
  pagerEl.innerHTML = '';
  // total pages over 'rest' (excluding featured)
  const totalPages = Math.max(1, Math.ceil(totalItems / perPage));
  // previous
  const prev = document.createElement('button');
  prev.innerHTML = '‹';
  prev.disabled = currentPage === 1;
  prev.onclick = () => { if (currentPage > 1) { currentPage--; renderMain(); } };
  pagerEl.appendChild(prev);

  // page numbers (limit shown)
  const maxButtons = 5;
  let start = Math.max(1, currentPage - 2);
  let end = Math.min(totalPages, start + maxButtons - 1);
  if (end - start < maxButtons - 1) start = Math.max(1, end - maxButtons + 1);

  for (let i = start; i <= end; i++) {
    const b = document.createElement('button');
    b.innerText = i;
    b.className = (i === currentPage ? 'active' : '');
    b.onclick = () => { currentPage = i; renderMain(); };
    pagerEl.appendChild(b);
  }

  // next
  const next = document.createElement('button');
  next.innerHTML = '›';
  next.disabled = currentPage === totalPages;
  next.onclick = () => { if (currentPage < totalPages) { currentPage++; renderMain(); } };
  pagerEl.appendChild(next);
}

// helper for colors similar to mock
function getCoverColor(category) {
  switch (category) {
    case "Alimentación": return { background: '#113427', text: '#fff', badge_color: "rgb(135 190 160)", icon: "apple-transparent" };
    case "Descanso": return { background: '#113427', text: '#fff', badge_color: "rgb(45 210 190)", icon: "moon-transparent" };
    case "Organización": return { background: '#113427', text: '#fff', badge_color: "rgb(95 165 250)", icon: "date-transparent" };
    case "Ocio": return { background: '#113427', text: '#fff', badge_color: "rgb(250 190 35)", icon: "heart-transparent" };
    case "Prevención": return { background: '#113427', text: '#fff', badge_color: "rgb(165 135 250)", icon: "shield-transparent" };
    default: return { background: '#113427', text: '#fff', icon: "book" };
  }
}

function initials(name) {
  return name.split(' ').slice(0, 2).map(n => n[0]).join('').toUpperCase();
}

// demo open article (simple modal)
// function openArticle(id) {
//   const a = articles.find(x => x.id == id);
//   if (!a) return;
//   const modal = document.createElement('div');
//   modal.style.position = 'fixed';
//   modal.style.inset = 0;
//   modal.style.background = 'rgba(0,0,0,0.4)';
//   modal.style.display = 'flex';
//   modal.style.alignItems = 'center';
//   modal.style.justifyContent = 'center';
//   modal.style.zIndex = 999;
//   modal.innerHTML = `
//         <div style="width:min(900px,94%);background:#fff;border-radius:12px;padding:22px;box-shadow:0 14px 40px rgba(0,0,0,0.25);max-height:86vh;overflow:auto">
//           <div style="display:flex;justify-content:space-between;align-items:center">
//             <h2 style="margin:0;font-family:Merriweather,serif">${a.title}</h2>
//             <button id="closeModal" style="background:transparent;border:none;font-size:20px;cursor:pointer">✕</button>
//           </div>
//           <div style="color:#6b6b6b;margin-top:8px">${a.category} • ${a.date} • ${a.readTime}</div>
//           <hr style="margin:16px 0;border:none;border-top:1px solid #eee"/>
//           <p style="line-height:1.6;color:#444">${a.excerpt} <em>(Texto de ejemplo — reemplaza con contenido real desde tu CMS)</em></p>
//           <p style="color:#666">Autor: <strong>${a.author}</strong></p>
//           <div style="margin-top:16px;display:flex;justify-content:flex-end;gap:10px">
//             <button id="close2" style="padding:8px 12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:#fff;cursor:pointer">Cerrar</button>
//             <a href="./app.html" style="padding:8px 12px;border-radius:8px;background:var(--accent);color:#fff;text-decoration:none">Leer en la app</a>
//           </div>
//         </div>
//       `;
//   document.body.appendChild(modal);
//   modal.querySelectorAll('#closeModal, #close2').forEach(b => b.addEventListener('click', () => modal.remove()));
//   modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
// }

function openArticle(id) {
  const a = articles.find(x => x.id == id);
  if (!a) return;

  const modal = document.createElement('div');
  modal.className = 'article-modal';
  modal.innerHTML = `
    <div class="modal-content">
      <button class="close-btn" aria-label="Cerrar">✕</button>
      <h1 class="article-title">${a.title}</h1>
      <div class="article-meta">
        <span>${a.category}</span> • 
        <span>${a.date}</span> • 
        <span>${a.readTime}</span> • 
        <strong>${a.author}</strong>
      </div>
      <hr/>
      <div class="article-body">${a.content || `<p>${a.excerpt}</p>`}</div>
      ${a.image ? `<img src="${a.image}" alt="${a.title}" class="article-cover"/>` : ''}
      <div class="article-actions">
        <button class="close-btn-2">Cerrar</button>
      </div>
    </div>
  `;
  document.body.appendChild(modal);

  // Eventos de cierre
  modal.querySelectorAll('.close-btn, .close-btn-2').forEach(b =>
    b.addEventListener('click', () => modal.remove())
  );
  modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
}

// init
renderFilters();
renderMain();

// small keyboard shortcuts (corporate power-user touch)
document.addEventListener('keydown', (e) => {
  if (e.key === 'f') { // focus first filter
    const first = filtersEl.querySelector('button');
    if (first) first.focus();
  }
  if (e.key === 'p') { // go to next page
    currentPage++;
    renderMain();
  }
});